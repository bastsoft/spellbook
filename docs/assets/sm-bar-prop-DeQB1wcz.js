import{S as w}from"./sm-tabs-BrqHXxQx.js";import{S as N}from"./s-icon-Ddfzw0Tx.js";import{S as P}from"./select-vb6-D41bfB2u.js";import{o as n,c as o,b as l,t as m,r as K,d as u,h as S,w as v,a as p,k as c,p as y,e as _,i as E,F as b,j as g,q as L,f as O}from"./vue.esm-bundler-BeytHvJU.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const k={name:"LabelVb6",props:{caption:String}},F={class:"label-vb6"},z={class:"label-vb6__caption"},M={class:"label-vb6__stacked"};function R(a,t,f,B,U,e){return n(),o("label",F,[l("div",z,m(f.caption),1),l("div",M,[K(a.$slots,"default")])])}const J=A(k,[["render",R]]);k.__docgenInfo={displayName:"LabelVb6",exportName:"default",description:"",tags:{},props:[{name:"caption",type:{name:"string"}}],slots:[{name:"default"}],sourceFiles:["/Users/petr/project/zaymigo/spellbook/src/vb60/2_atoms/label/label-vb6.vue"]};const C={name:"SmBarProp",components:{SmTabs:w,sIcon:N,SelectVB6:P,LabelVb6:J},data:()=>({presetKey:null,argTypeValue:"",argTypesDefault:{class:{control:"text"},"v-for":{control:"select",description:"цикл vue для создания списка",options:["item in items","(item, index) in items","item of items","value in object","(value, name) in object","(value, name, index) in object","n in 10"]},key:{control:"text"},"v-if":{description:"условие для отображения элемента",control:"text"},"v-else-if":{description:"условие для отображения элемента",control:"text"},"v-else":{description:"условие для отображения элемента",control:"text"},"v-show":{description:"условие для отображения элемента",control:"text"},"v-model":{control:"text"},"v-bind":{control:"text"}},slotTypeValue:"",slotTypesDefault:{default:{name:"default",description:"The default Vue slot."}}}),props:{subArr:{type:Array,default:()=>[]},subArrIndex:{type:[null,String],default:null},argTypesExtra:{type:Object,default:()=>{}},slotTypesExtra:{type:Object,default:()=>{}},presets:{type:Array,default:()=>[]}},computed:{slotTypes(){return{...this.slotTypesDefault,...this.slotTypesExtra}},argTypes(){return{...this.argTypesDefault,...this.argTypesExtra}},index:{get(){return this.subArrIndex},set(a){this.$emit("update:subArrIndex",a)}},arr:{get(){return this.subArr},set(a){this.$emit("update:subArr",a)}},selectedElement(){return this.arr[this.index]||{args:{},slots:{}}},argKeys(){return Object.keys((this.selectedElement||{}).args||{}).filter(a=>a.includes(this.argTypeValue))}},watch:{selectedElement(){this.argTypeValue=""}},methods:{unSelect(){this.index=null,new BroadcastChannel("test_channel").postMessage({type:"selected",payload:""})},onRemove(){this.arr.splice(this.index,1),this.index=null},onDuplicate(){const a=JSON.parse(JSON.stringify(this.arr[this.index]));this.arr.splice(this.index+1,0,a),this.index=null},onAddArg(){this.selectedElement.args[this.argTypeValue]="",this.$emit("change")},onDeleteArg(a){delete this.selectedElement.args[a],this.$emit("change")},onAddSlot(){this.selectedElement.slots[this.slotTypeValue]={children:[],prop:""}},onSetPreset(){this.$emit("selectPreset",this.presetKey)}}},q={class:"sm-bar-prop"},G={class:"sm-bar-prop-tools"},H={id:"slotTypes"},Q={label:"default"},W=["value"],X={class:"sm-bar-prop-item__elem"},Y=["onUpdate:modelValue"],Z=["onClick"],$={id:"argTypes"},ee={label:"default"},te=["value"],se={class:"sm-bar-prop-item__elem"},le=["onUpdate:modelValue","list"],ae=["onClick"],ne=["value"],re={key:0,class:"sm-bar-prop-item__desc"},oe=["id"],de=["value"];function ie(a,t,f,B,U,e){const h=_("sIcon"),T=_("LabelVb6"),j=_("SmTabs"),D=_("SelectVB6");return n(),o("div",q,[l("div",G,[l("button",{onClick:t[0]||(t[0]=(...r)=>e.unSelect&&e.unSelect(...r)),title:"cнять выделение"},[u(h,{name:"unselect"})]),l("button",{onClick:t[1]||(t[1]=(...r)=>e.onRemove&&e.onRemove(...r)),title:"удалить элемент"},[u(h,{name:"remove"})]),l("button",{onClick:t[2]||(t[2]=(...r)=>e.onDuplicate&&e.onDuplicate(...r)),title:"продублировать элемент"},[u(h,{name:"duplicate"})])]),e.selectedElement.tag?(n(),S(j,{key:0,tabs:["args","slots"],"onUpdate:tab":t[8]||(t[8]=r=>a.currentTab=r)},{default:v(({nameClass:r,tab:x})=>[x==="slots"?(n(),o("div",{key:0,class:E(r)},[u(T,null,{default:v(()=>[c(l("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.slotTypeValue=s),type:"text",list:"slotTypes"},null,512),[[y,a.slotTypeValue]]),l("datalist",H,[l("optgroup",Q,[(n(!0),o(b,null,g(e.slotTypes,(s,d,i)=>(n(),o("option",{key:d+i,value:d},m(s.description),9,W))),128))])]),l("button",{onClick:t[4]||(t[4]=(...s)=>e.onAddSlot&&e.onAddSlot(...s)),title:"добавить слот"},"+")]),_:1}),(n(!0),o(b,null,g(e.selectedElement.slots,(s,d,i)=>(n(),o("label",{class:"sm-bar-prop-item",key:"slot"+d+i+e.selectedElement.tag},[l("div",null,m(d),1),l("div",X,[c(l("input",{style:{width:"100%"},"onUpdate:modelValue":V=>e.selectedElement.slots[d].prop=V},null,8,Y),[[y,e.selectedElement.slots[d].prop]]),l("button",{onClick:()=>{delete e.selectedElement.slots[d]}}," x ",8,Z)])]))),128))],2)):p("",!0),x==="args"?(n(),o("div",{key:1,class:E(r)},[u(T,null,{default:v(()=>[c(l("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.argTypeValue=s),type:"text",list:"argTypes"},null,512),[[y,a.argTypeValue]]),l("datalist",$,[l("optgroup",ee,[(n(!0),o(b,null,g(e.argTypes,(s,d,i)=>(n(),o("option",{key:d+i,value:d},m(s.description),9,te))),128))])]),l("button",{onClick:t[6]||(t[6]=(...s)=>e.onAddArg&&e.onAddArg(...s)),title:"добавить аргумент"},"+")]),_:1}),(n(!0),o(b,null,g(e.argKeys||[],(s,d)=>(n(),o("label",{class:"sm-bar-prop-item",key:s+d+(e.selectedElement||{}).tag},[l("div",null,m(s),1),l("div",se,[c(l("input",{style:{width:"100%"},"onUpdate:modelValue":i=>e.selectedElement.args[s]=i,list:"argTypes"+s},null,8,le),[[y,e.selectedElement.args[s]]]),l("button",{onClick:i=>e.onDeleteArg(s)},"x",8,ae),c(l("input",{type:"checkbox",value:s,"onUpdate:modelValue":t[7]||(t[7]=i=>e.selectedElement.argsBinded=i)},null,8,ne),[[L,e.selectedElement.argsBinded]])]),e.argTypes[s]?(n(),o("div",re,[O(m((e.argTypes[s]||{}).description)+" ",1),l("datalist",{id:"argTypes"+s},[(n(!0),o(b,null,g((e.argTypes[s]||{}).options,(i,V,I)=>(n(),o("option",{key:"argTypes"+s+V+I,value:i},null,8,de))),128))],8,oe)])):p("",!0)]))),128))],2)):p("",!0)]),_:1})):p("",!0),e.selectedElement.tag?p("",!0):c((n(),o("textarea",{key:1,"onUpdate:modelValue":t[9]||(t[9]=r=>e.selectedElement.args.content=r),style:{height:"80%",width:"100%"}},null,512)),[[y,e.selectedElement.args.content]]),f.presets.length?(n(),S(T,{key:2,caption:"presets"},{default:v(()=>[u(D,{modelValue:a.presetKey,"onUpdate:modelValue":t[10]||(t[10]=r=>a.presetKey=r),options:f.presets},null,8,["modelValue","options"]),l("button",{onClick:t[11]||(t[11]=(...r)=>e.onSetPreset&&e.onSetPreset(...r))},"+")]),_:1})):p("",!0)])}const be=A(C,[["render",ie]]);C.__docgenInfo={displayName:"SmBarProp",exportName:"default",description:"",tags:{},props:[{name:"subArr",type:{name:"array"},defaultValue:{func:!1,value:"[]"}},{name:"subArrIndex",type:{name:"null|string"},defaultValue:{func:!1,value:"null"}},{name:"argTypesExtra",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"slotTypesExtra",type:{name:"object"},defaultValue:{func:!0,value:"() => {}"}},{name:"presets",type:{name:"array"},defaultValue:{func:!1,value:"[]"}}],events:[{name:"update:subArrIndex",type:{names:["undefined"]}},{name:"update:subArr",type:{names:["undefined"]}},{name:"change"},{name:"selectPreset",type:{names:["undefined"]}}],sourceFiles:["/Users/petr/project/zaymigo/spellbook/src/components/spell-item/spell-markup/sm-bar-prop/sm-bar-prop.vue"]};export{be as S};
